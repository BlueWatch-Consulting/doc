==Setup==

===Register namespaces===

On the prolog command line:

 rdf_register_prefix('zbwext', 'http://zbw.eu/namespaces/zbw-extensions/').
 rdf_register_prefix('sdmx', 'http://purl.org/linked-data/sdmx#').

===Vocabularies with hash URIs===

For vocabularies with hash URIs, the SKOS browser does not work correctly. As a workarround, replace '#' with '/' within the URI.



==Installation on Redhat/CentOS==

Amalgame is based on ClioPatria, which is requires the latest version of SWI-Prolog.

===Install SWI Prolog===

====SWI-Prolog 6.6.4 on CentOS 6.5====

1) Install dependencies as indicated in http://www.swi-prolog.org/build/Redhat.html (+ gcc)

2) Follow http://www.swi-prolog.org/build/unix.html

Set in build

  PREFIX=/usr/local

Ends with warnings:

  make[1]: Leaving directory `/usr/local/src/pl-6.6.4/packages'
 
  QA Notice: Package triggers severe warnings which indicate that it
            may exhibit random runtime failures.
  archive4pl.c:725: warning: implicit declaration of function ‘archive_filter_count’
  archive4pl.c:730: warning: implicit declaration of function ‘archive_filter_name’
 
  QA Notice: Package triggers severe warnings which indicate that it
            may exhibit random runtime failures.
  archive4pl.c:730: warning: assignment makes pointer from integer without a cast

====CentOS 5.x====

Did not work - see http://www.swi-prolog.org/bugzilla/show_bug.cgi?id=76 (for CentOS 5.10 and SWI-Prolog 6.6.5, too).

===Install ClioPatria and Amalgame===

  cd /opt
  git clone git://www.swi-prolog.org/home/pl/git/ClioPatria.git
  ./configure

  ./run.pl
    ?- cpack_install('amalgame').

Invoke http://localhost:3020 and set password for 'admin'.

===Set up Apache reverse proxy===

Add to ClioPartria/settings.db:

  %       Prefix for all locations of this server
  setting(http:prefix, '/amalgame').

Create /etc/httpd/conf.d/amalgame.conf

  ProxyPass /amalgame http://127.0.0.1:3020/amalgame
  ProxyPassReverse /amalgame http://127.0.0.1:3020/amalgame

