Munin ist ein Werkzeug zur Überwachung von Rechnern in einem Rechnernetzwerk mit Status- und Prozess-Visualisierung. Ein zentraler Rechner, der sogenannte „Master”, sammelt Leistungsdaten von im Netzwerk verteilten Computern, den „Nodes”, speichert diese und stellt die Daten mittels Webschnittstelle graphisch dar.

==Plugins==

Plugins liegen in 
 /usr/share/munin/plugins
und werden per slink
 ln -s /usr/share/munin/plugins/http_response_time_ /etc/munin/plugins/http_response_time_server
aktiviert

===Plugin Test===

 munin-run http_response_time_servers
Evtl. Konfigurationen werden in der 
 /etc/munin/plugin-conf.d/munin-node
oder in Dateien zum jeweiligen Plugin (z.B. <tt>postgres</tt>) vorgenommen. Z.B. kann das Plugin mit Parametern aufgerufen werden.

Die Konfigurationsparameter von Plugins können mit "config" abgefragt werden, z.B. 
  munin-run load config
abgefragt werden.

===Überwachung von HTTP-basisierten Services===

Mit Plugin [https://github.com/munin-monitoring/contrib/blob/master/plugins/other/wget_page wget_page], Parameter s.d., werden sowohl Antwortzeiten als auch HTTP-Responsecodes als auch optional reguläre Ausdrücke auf der Webseite überwacht.

===Postgresql===

Plugins:
* [https://github.com/munin-monitoring/contrib/blob/master/plugins/other/postgres_space_ postgres_space_] - Plattenplatzbelegung
* [https://github.com/munin-monitoring/contrib/blob/master/plugins/other/postgres_block_read_ postgres_block_read_] - Disk ./. Cache
: unter 8.4 reichen die default Parameter aus, es brauchen keine speziellen Werte in postgresql.conf gesetzt werden.
* [http://munin-monitoring.org/svn/munin/trunk/plugins/node.d/postgres_tuples_.in postgres_tuples_] - einzelne Operationen (aus einer neuern Version der Distribution, braucht Munin/Plugin/Pgsql.pm, funktioniert daher leider nicht!)
minimale Config in <tt> /etc/munin/plugin-conf.d/postgres </tt>

==Munin auf DMZ-Rechner über SSH-Tunnel==

s. Intranet

==Upgrade auf Munin 2.0.19 (21.2.2014)==

===Masterserver (Centos 5.7 i386)===

(von munin-1.2.5-2.el5.rf)

<pre>
yum install --enablerepo=epel munin munin-node

...

#======================================================================================
 Package                        Arch         Version             Repository      Size
#======================================================================================
Updating:
 munin                          noarch       2.0.19-1.el5        epel           218 k
 munin-node                     noarch       2.0.19-1.el5        epel           422 k
Installing for dependencies:
 munin-common                   noarch       2.0.19-1.el5        epel            87 k
 perl-Cache-Cache               noarch       1.06-1.el5.rf       rpmforge        84 k
 perl-Cache-Memcached           noarch       1.29-1.el5.rf       rpmforge        27 k
 perl-Carp-Always               noarch       0.09-2.el5          epel           9.7 k
 perl-Class-Singleton           noarch       1.4-1.el5.rf        rpmforge        15 k
 perl-DBD-Pg                    i386         1.49-4.el5_8        base           114 k
 perl-DateTime                  i386         1:0.41-1.el5        epel           598 k
 perl-FCGI                      i386         0.68-1.el5.rf       rpmforge        87 k
 perl-File-Copy-Recursive       noarch       0.38-1.el5.rf       rpmforge        22 k
 perl-List-MoreUtils            i386         0.33-5.el5          epel            77 k
 perl-Log-Log4perl              noarch       1.26-1.el5.rf       rpmforge       406 k
 perl-Net-CIDR                  noarch       0.13-2.el5          epel            16 k
 perl-Params-Validate           i386         0.95-1.el5.rf       rpmforge       113 k
 perl-Taint-Runtime             i386         0.03-1.el5.1        epel            19 k
 perl-XML-LibXML                i386         1.58-6              base           230 k
 perl-XML-LibXML-Common         i386         0.13-8.2.2          base            16 k

Transaction Summary
#======================================================================================
Install      16 Package(s)
Upgrade       2 Package(s)

...
  Updating       : munin-node                                                   17/20
warning: /etc/munin/munin-node.conf created as /etc/munin/munin-node.conf.rpmnew
warning: /etc/munin/plugin-conf.d/munin-node created as /etc/munin/plugin-conf.d/munin-node.rpmnew
  Updating       : munin                                                        18/20
warning: /etc/httpd/conf.d/munin.conf created as /etc/httpd/conf.d/munin.conf.rpmnew
warning: /etc/munin/munin.conf created as /etc/munin/munin.conf.rpmnew
  Cleanup        : munin                                                        19/20
  Cleanup        : munin-node                                                   20/20
</pre>
Glatt durchgelaufen

===Nodeserver (RHEL 5.10 x86_64)===

(von munin-node-1.2.5-2.el5.rf)
<pre>
# yum upgrade munin-node --enablerepo=epel
...

#================================================================================
 Package                Arch      Version         Repository               Size
#================================================================================
Updating:
 munin-node             noarch    2.0.19-1.el5    epel                    422 k
Installing for dependencies:
 munin-common           noarch    2.0.19-1.el5    epel                     87 k
 perl-List-MoreUtils    x86_64    0.33-5.el5      epel                     75 k
 perl-Net-CIDR          noarch    0.13-2.el5      epel                     16 k
 perl-Net-DNS           x86_64    0.59-3.el5      rhel-x86_64-server-5    215 k
 perl-Net-IP            noarch    1.25-2.fc6      rhel-x86_64-server-5     31 k

Transaction Summary
#================================================================================
Install       5 Package(s)
Upgrade       1 Package(s)

...
  Updating       : munin-node                                               6/7
warning: /etc/munin/munin-node.conf created as /etc/munin/munin-node.conf.rpmnew
  Cleanup        : munin-node                                               7/7
</pre>

Glatt durchgelaufen

===Installation auf Nodeserver (Centos 6.4 x86_64)===

<pre>
# yum install munin-node --enablerepo=epel
...

#=============================================================================================================================================================
 Package                                           Arch                           Version                                 Repository                    Size
#=============================================================================================================================================================
Installing:
 munin-node                                        noarch                         2.0.19-1.el6                            epel                         399 k
Installing for dependencies:
 hdparm                                            x86_64                         9.43-4.el6                              base                          81 k
 munin-common                                      noarch                         2.0.19-1.el6                            epel                          86 k
 perl-Crypt-DES                                    x86_64                         2.05-9.el6                              epel                          19 k
 perl-DBD-Pg                                       x86_64                         2.15.1-4.el6_3                          base                         196 k
 perl-IO-Multiplex                                 noarch                         1.13-1.el6                              epel                          24 k
 perl-List-MoreUtils                               x86_64                         0.22-10.el6                             base                          53 k
 perl-Net-CIDR                                     noarch                         0.14-1.el6                              epel                          17 k
 perl-Net-SNMP                                     noarch                         5.2.0-4.el6                             epel                         100 k
 perl-Net-Server                                   noarch                         0.97-7.el6                              epel                         142 k
 perl-XML-LibXML                                   x86_64                         1:1.70-5.el6                            base                         364 k
 perl-XML-NamespaceSupport                         noarch                         1.10-3.el6                              base                          17 k
 perl-XML-Parser                                   x86_64                         2.36-7.el6                              base                         224 k
 perl-XML-SAX                                      noarch                         0.96-7.el6                              base                          78 k
 sysstat                                           x86_64                         9.0.4-22.el6                            base                         230 k

Transaction Summary
#============================================================================================================================================================
Install      15 Package(s)
</pre>

Glatt durchgelaufen

===Anpassungen Config===

auf Basis der .rpmnew Files

==Diverse Fehler==

===Zoom Graph wird nicht angezeigt===

  chcon -R -t httpd_sys_script_exec_t /opt/munin/www/cgi

==Links==

[http://munin-monitoring.org/ Munin - Trac]

[http://exchange.munin-monitoring.org/ Munin Exchange | Munin plugin repository]

[http://www.howtoforge.de/howto/uberwachung-eines-centos-52-servers-mit-munin-und-monit/ Überwachung eines CentOS 5.2 Servers mit munin und monit | HowtoForge]

[http://www.sysadmin-fr.org/en/munin-getting-started Getting started - a simple setup | sysadmin]

[http://munin.openstreetmap.org/ Munin-Graphen der Open Streetmap Site]

